### 인증
> 필요한 이유
> 
권한을 가진 리소스에만 접근 가능하게하기 위해

> 인증 방법
> 
1. **계정정보를 request header에 넣는 방식**
    장점
      - 인증을 테스트 할 때 빠르게 시도가능
      
    단점
      - 보안에 매우 취약
      - 서버에서는 신호가 올때마다 Id,Pw를 통해 유저가 맞는지 인증(비효율적)

2. **쿠키 / 세션**
   세션 쿠키 방식의 인증은 기본적으로 세션 저장소를 필요(Redis를 많이 사용)
![](https://i.imgur.com/yBr38pt.png)

    - 세션 저장소는 로그인을 했을 때 사용자의 정보를 저장하고 열쇠가 되는 세션ID를 생성
    - HTTP 헤더에 실어 사용자에게 response 
    - 사용자는 쿠키로 보관하고 있다 인증이 필요한 요청에 쿠키(세션ID)를 넣어 request 
    - 웹 서버에서는 세션 저장소에서 쿠키(세션ID)를 받고 저장되어 있는 정보와 매칭시켜 인증을 완료
    
   **장점**
   - 쿠키가 담긴 HTTP 요청이 도중에 노출되더라도 쿠키 자체(세션 ID)는 유의미한 값을 갖고있지 않음(중요 정보는 서버 세션에)
   - 사용자마다 고유의 ID값을 발급 일일히 회원정보 확인이 필요 없음
  
   **단점**
   - 세션하이재킹: 훔친 쿠키를 이용해 HTTP 요청을 보내면 서버의 세션저장소에서는 사용자를 오인해 정보를 알려줌
   - 해결책
       - HTTPS를 사용해 요청 자체를 탈취해도 안의 정보를 읽기 힘들게 한다.
       - 세션에 유효시간을 넣어준다. 
   - 서버에서 추가적인 저장공간을 필요
   - CORS, CSRF의 문제점

4. **토큰기반** 
   [jwt](https://github.com/moonelysian/TIL/blob/master/5%EC%9B%9419%EC%9D%BC.md#jwt)
   

### DB 정규화
**필요한 이유**
불필요한 데이터 중복에 의한 공간 낭비 + 이상현상을 막기 위해
- 삽입이상: 새 데이터를 삽입하기위해 불필요한 데이터도 삽입해야하는 경우
- 갱신이상: 중복 튜플 중 일부만 변경하여 데이터가 불일치하게 되는 모순의 문제
- 삭제이상: 튜플을 삭제하면 꼭 필요한 데이터까지 함께 삭제되는 데이터 손실의 문제

<br>

> 정규화 단계
> 
1. **제1정규형(1NF)**
   각 로우마다 컬럼의 값이 1개씩만(각 컬럼이 원자값을 가짐)
   
    | name | age | subject |
    | ---- | --- | ------- |
    | Jack | 21  |Bio, Math|
    | Mac  | 20  |Art      |
    
    :arrow_down: 
    
    | name | age | subject |
    | ---- | --- | ------- |
    | Jack | 21  |Bio      |
    | Jack | 21  |Math     |
    | Mac  | 20  |Art      |

2. **제2정규형(2NF)**
   기본키중에 특정 컬럼에만 종속된 컬럼(부분적 종속)이 없어야 한다는 것
   
   기본키: name + subject
   age는 name에만 종속적 :arrow_right: age가 두번 들어가는건 불필요
   
    | name | age | subject |
    | ---- | --- | ------- |
    | Jack | 21  |Bio      |
    | Jack | 21  |Math     |
    | Mac  | 20  |Art      |
    
    :arrow_down: 
    
    | name | subject |
    | ---- | ------- |
    | Jack |Bio      |
    | Jack |Math     |
    | Mac  |Art      |
    
    | name | age |
    | ---- | --- |
    | Jack | 21  |
    | Mac  | 20  |
    
    
3. **제3정규형(3NF)**
   기본키 이외의 다른 컬럼이 그외 다른 컬럼을 결정할 수 없음
   기본키: student_id
   우편번호를 알면 시,구,동이 결정 :arrow_right: 중복발생 가능
   |student_id|student_name|시|구|동|우편번호|
   |----------|------------|-|-|-|-|
   |150101|김철수|서울시|A구|AA동|12311|
   |170101|김영희|서울시|A구|AA동|12311|
   |173301|박철수|서울시|B구|BB동|25677|
   
   :arrow_down: 
   
   |student_id|student_name|우편번호|
   |----------|------------|-|
   |150101|김철수|12311|
   |170101|김영희|12311|
   |173301|박철수|25677|
   
   |우편번호|시|구|동|
   |------|-|-|-|
   |12311|서울시|A구|AA동|
   |25677|서울시|B구|BB동|
 
4. **BCNF**
   3차 정규형을 조금 더 강화한 버전
   3차정규형을 만족하면서 모든 결정자가 후보키(기본키로 사용할 수 있는 속성) 집합에 속한 정규형
   
   if. 교수당 한 과목만 강의 가능
   기본키: 학생 + 과목
   
   | 학생 | 과목 | 교수  |
   | --- | --- | ---  |
   | 1 | A111  | kim  |
   | 2 | B111  | park |
   | 3 | B111  | park |
   
   
   데이터가 중복 + 갱신 이상이 발생
   B111을 강의하는 교수가 바뀌었다면 두 개의 로우를 갱신함
   
   :arrow_down:
   
   | 학생 | 과목 |
   | - | --- |
   | 1 | A111  |
   | 2 | B111  |
   | 3 | B111  |
   
   | 과목 | 교수  |
   | --- | ---  |
   | A111  | kim  |
   | B111  | park |
